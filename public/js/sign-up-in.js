// Generated by CoffeeScript 1.9.0
(function() {
  var EMAIL_INPUT, NAME_INPUT, addErrorsToEmptyFields, clearFieldErrors;

  EMAIL_INPUT = $('input[name="email"]');

  NAME_INPUT = $('input[name="name"]');

  $('form.sign-up').submit(function(event) {
    var email, name;
    email = EMAIL_INPUT.val();
    name = NAME_INPUT.val();
    if (email && name) {
      $.ajax({
        url: '/is-valid-email',
        type: 'POST',
        data: {
          'email': email
        },
        async: false,
        success: function(isValidEmail) {
          if (isValidEmail) {
            return clearFieldErrors();
          } else {
            return EMAIL_INPUT.addClass('error');
          }
        }
      });
      return false;
    } else {
      clearFieldErrors();
      addErrorsToEmptyFields(email, name);
      return false;
    }
  });

  addErrorsToEmptyFields = function(email, name) {
    if (!email) {
      EMAIL_INPUT.addClass('error');
    }
    if (!name) {
      return NAME_INPUT.addClass('error');
    }
  };

  clearFieldErrors = function() {
    EMAIL_INPUT.removeClass('error');
    return NAME_INPUT.removeClass('error');
  };

}).call(this);
